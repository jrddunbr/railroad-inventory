{% extends "base.html" %}
{% block content %}
  <div class="box">
    <h1 class="title is-3">Inspect Car {{ car.id }}</h1>
    <p class="keyboard-hint">Record a new inspection and update the last inspection date.</p>
    <form method="post" action="{{ url_for('main.car_inspect', car_id=car.id) }}" data-confirm-skip="true">
      <div class="grid">
        <div>
          <label for="inspection_date">Inspection Date</label>
          <input id="inspection_date" name="inspection_date" type="date" required />
        </div>
        <div>
          <label for="inspection_type_id">Inspection Type</label>
          <select id="inspection_type_id" name="inspection_type_id" required {% if not inspection_types %}disabled{% endif %}>
            <option value="">Select...</option>
            {% for row in inspection_types %}
              <option value="{{ row.type.id }}">{{ row.label }}</option>
            {% endfor %}
          </select>
        </div>
        <div>
          <label for="inspection_passed">Result</label>
          <select id="inspection_passed" name="inspection_passed" required {% if not inspection_types %}disabled{% endif %}>
            <option value="">Select...</option>
            <option value="passed">Passed</option>
            <option value="failed">Failed</option>
          </select>
        </div>
      </div>
      <div class="grid">
        <div>
          <label for="inspection_details">Comments</label>
          <textarea id="inspection_details" name="inspection_details" rows="4"></textarea>
        </div>
      </div>
      {% if not inspection_types %}
        <p class="keyboard-hint">Add inspection types first in <a href="{{ url_for('main.settings') }}">Settings</a>.</p>
      {% endif %}
      <div class="actions buttons">
        <button type="submit" class="button is-small is-primary" {% if not inspection_types %}disabled{% endif %}>Save Inspection</button>
        <a class="button is-small is-light" href="{{ url_for('main.car_detail', car_id=car.id) }}">Cancel</a>
      </div>
    </form>
  </div>
{% endblock %}
