{% extends "base.html" %}
{% block content %}
  <div class="box">
    <h1 class="title is-3">{{ "Edit Load" if load else "New Load" }}</h1>
    <form method="post" action="{{ url_for('main.load_edit', load_id=load.id) if load else url_for('main.load_new') }}" data-table="loads" data-id="{{ load.id if load else '' }}" data-id-field="id">
      <div class="grid">
        <div class="field">
          <label class="label" for="name">Name</label>
          <div class="control">
            <input class="input" id="name" name="name" value="{{ load.name if load else '' }}" required />
          </div>
        </div>
      </div>
      <h2 class="title is-4">Dimensions</h2>
      <div class="grid">
        <div class="field">
          <label class="label" for="length">Length</label>
          <div class="control">
            <input class="input" id="length" name="length" value="{{ load.length if load else '' }}" />
          </div>
        </div>
        <div class="field">
          <label class="label" for="width">Width</label>
          <div class="control">
            <input class="input" id="width" name="width" value="{{ load.width if load else '' }}" />
          </div>
        </div>
        <div class="field">
          <label class="label" for="height">Height</label>
          <div class="control">
            <input class="input" id="height" name="height" value="{{ load.height if load else '' }}" />
          </div>
        </div>
        <div class="field">
          <label class="label" for="car_class_id">Car Class Match</label>
          <div class="control">
            <div class="select is-fullwidth">
              <select id="car_class_id" name="car_class_id">
                <option value="">-</option>
                {% for class in classes %}
                  <option value="{{ class.id }}" {% if load and load.car_class_id == class.id %}selected{% endif %}>{{ class.code }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
        </div>
      </div>
      <h2 class="title is-4">Model Details</h2>
      <div class="grid">
        <div class="field">
          <label class="label" for="lettering">Lettering</label>
          <div class="control">
            <input class="input" id="lettering" name="lettering" value="{{ load.lettering if load else '' }}" />
          </div>
        </div>
        <div class="field">
          <label class="label" for="era">Era</label>
          <div class="control">
            <input class="input" id="era" name="era" value="{{ load.era if load else '' }}" />
          </div>
        </div>
        <div class="field">
          <label class="label" for="railroad_id">Railroad</label>
          <div class="control">
            <div class="select is-fullwidth">
              <select id="railroad_id" name="railroad_id">
                <option value="">-</option>
                {% for railroad in railroads %}
                  <option value="{{ railroad.id }}" {% if load and load.railroad_id == railroad.id %}selected{% endif %}>{{ railroad.name }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
        </div>
      </div>
      <h2 class="title is-4">Asset</h2>
      <div class="grid">
        <div class="field">
          <label class="label" for="msrp">MSRP</label>
          <div class="control">
            <input class="input" id="msrp" name="msrp" value="{{ load.msrp if load else '' }}" />
          </div>
        </div>
        <div class="field">
          <label class="label" for="price">Price</label>
          <div class="control">
            <input class="input" id="price" name="price" value="{{ load.price if load else '' }}" />
          </div>
        </div>
        <div class="field">
          <label class="label" for="brand">Brand</label>
          <div class="control">
            <input class="input" id="brand" name="brand" value="{{ load.brand if load else '' }}" />
          </div>
        </div>
        <div class="field">
          <label class="label" for="upc">UPC</label>
          <div class="control">
            <input class="input" id="upc" name="upc" value="{{ load.upc if load else '' }}" />
          </div>
        </div>
      </div>
      <h2 class="title is-4">Notes</h2>
      <div class="grid">
        <div class="field">
          <label class="label" for="repairs_required">Repairs Required</label>
          <div class="control">
            <textarea class="textarea" id="repairs_required" name="repairs_required" rows="3">{{ load.repairs_required if load else '' }}</textarea>
          </div>
        </div>
        <div class="field">
          <label class="label" for="notes">Notes</label>
          <div class="control">
            <textarea class="textarea" id="notes" name="notes" rows="3">{{ load.notes if load else '' }}</textarea>
          </div>
        </div>
      </div>
      <div class="actions buttons">
        <button type="submit" class="button is-small is-primary">Save</button>
        {% if load %}
          <a class="button is-small is-light" href="{{ url_for('main.load_detail', load_id=load.id) }}">Cancel</a>
        {% else %}
          <a class="button is-small is-light" href="{{ url_for('main.loads') }}">Cancel</a>
        {% endif %}
      </div>
    </form>
  </div>
{% endblock %}
