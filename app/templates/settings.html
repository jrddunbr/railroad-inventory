{% extends "base.html" %}
{% block content %}
  <div class="box">
    <h1 class="title is-3">Settings</h1>
    <h2 class="title is-4">Table Pagination</h2>
    <form method="post" action="{{ url_for('main.settings_pagination') }}" data-table="app_settings" data-id="1" data-id-field="id" data-entity-label="pagination settings">
      <label class="label" for="page_size">Rows per page</label>
      <div class="control">
        <div class="select is-fullwidth">
          <select name="page_size" id="page_size">
            {% for option in page_size_options %}
              <option value="{{ option.value }}" {% if option.value == page_size %}selected{% endif %}>{{ option.label }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
      <div class="actions buttons">
        <button type="submit" class="button is-small is-primary is-light">Save Pagination</button>
      </div>
    </form>
    <h2 class="title is-4">Scale &amp; Gauge Options</h2>
    <p class="keyboard-hint">One option per line. Use `Scale|Ratio` (example: `HO|1:87`) and `Gauge|Scales` (example: `16.5 mm|HO, HOn3`).</p>
    <form method="post" action="{{ url_for('main.settings_scale_gauge') }}" data-table="app_settings" data-id="1" data-id-field="id" data-entity-label="scale and gauge settings">
      <div class="grid">
        <div class="field">
          <label class="label" for="scale_options">Scale Options</label>
          <div class="control">
            <textarea class="textarea" id="scale_options" name="scale_options" rows="10">{{ scale_options_text }}</textarea>
          </div>
        </div>
        <div class="field">
          <label class="label" for="gauge_options">Gauge Options</label>
          <div class="control">
            <textarea class="textarea" id="gauge_options" name="gauge_options" rows="10">{{ gauge_options_text }}</textarea>
          </div>
        </div>
      </div>
      <div class="actions buttons">
        <button type="submit" class="button is-small is-primary is-light">Save Scale &amp; Gauge</button>
      </div>
    </form>
    <h2 class="title is-4">Inspection Types</h2>
    <p class="keyboard-hint">Types: {{ inspection_types|length }}</p>
    <div class="actions buttons">
      <a class="button is-small is-primary" href="{{ url_for('main.inspection_type_new') }}">Add Inspection Type</a>
    </div>
    <table class="table is-fullwidth is-striped">
      <thead>
        <tr>
          <th>Name</th>
          <th>Parent</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for row in inspection_types %}
        <tr>
          <td>{{ row.label }}</td>
          <td>{{ row.type.parent.name if row.type.parent else "-" }}</td>
          <td>
            <a class="button is-small is-info" href="{{ url_for('main.inspection_type_edit', type_id=row.type.id) }}">Edit</a>
            <form method="post" action="{{ url_for('main.inspection_type_delete', type_id=row.type.id) }}" data-action="delete" data-table="inspection_types" data-id="{{ row.type.id }}" data-id-field="id" data-entity-label="inspection type {{ row.type.id }}" style="display: inline;">
              <button type="submit" class="button is-small is-danger">Delete</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="3">No inspection types yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
