{% extends "base.html" %}
{% block content %}
  <div class="box">
    <h1>Settings</h1>
    <h2>Table Pagination</h2>
    <form method="post" action="{{ url_for('main.settings_pagination') }}" data-table="app_settings" data-id="1" data-id-field="id" data-entity-label="pagination settings">
      <label for="page_size">Rows per page</label>
      <select name="page_size" id="page_size">
        {% for option in page_size_options %}
          <option value="{{ option.value }}" {% if option.value == page_size %}selected{% endif %}>{{ option.label }}</option>
        {% endfor %}
      </select>
      <div class="actions buttons">
        <button type="submit" class="button is-small is-primary is-light">Save Pagination</button>
      </div>
    </form>
    <h2>Inspection Types</h2>
    <p class="keyboard-hint">Types: {{ inspection_types|length }}</p>
    <div class="actions buttons">
      <a class="button is-small is-light" href="{{ url_for('main.inspection_type_new') }}">Add Inspection Type</a>
    </div>
    <table class="table is-fullwidth is-striped">
      <thead>
        <tr>
          <th>Name</th>
          <th>Parent</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for row in inspection_types %}
        <tr>
          <td>{{ row.label }}</td>
          <td>{{ row.type.parent.name if row.type.parent else "-" }}</td>
          <td>
            <a class="button is-small is-light" href="{{ url_for('main.inspection_type_edit', type_id=row.type.id) }}">Edit</a>
            <form method="post" action="{{ url_for('main.inspection_type_delete', type_id=row.type.id) }}" data-action="delete" data-table="inspection_types" data-id="{{ row.type.id }}" data-id-field="id" data-entity-label="inspection type {{ row.type.id }}" style="display: inline;">
              <button type="submit" class="button is-small is-primary is-light">Delete</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="3">No inspection types yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
